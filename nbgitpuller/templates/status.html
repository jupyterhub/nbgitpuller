{% extends "page.html" %}

{% block params %}
{{super()}}
data-base-url="{{ base_url | urlencode }}"
data-repo="{{ repo | urlencode }}"
data-path="{{ path | urlencode }}"
data-xsrf="{{ xsrf_token | urlencode }}"
{% if branch %}data-branch="{{ branch | urlencode }}"{% endif %}
{% if depth %}data-depth="{{ depth | urlencode }}"{% endif %}
data-targetpath="{{ targetpath | urlencode }}"
{% endblock %}

{% block site %}
<div class="container">
    <div class="page-header">
        Synchronizing <a href="{{ repo }}">git repository</a> before sending you to <strong>{{ path }}...</strong>
    </div>

    <div class="panel panel-default">
    <div class="panel-heading" id="status-panel-toggle">
        <div class="progress">
            <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100" style="width: 1%" id="status-panel-title">
                <span></span>
            </div>
        </div>
        <small>Click to see more details</small>
    </div>
    <div class="panel-body hidden" id="status-details-container">
            <div id="status-details"></div>
    </div>
</div>
<div id="container-error" class="container hidden">
    <div class="row">
        <div id="recovery-link" class="col-xs-6 pull-left">
            <a class="btn btn-warning" href="{{ base_url }}" aria-label="Go to the Jupyter server without synchronizing content">Proceed to server without synchronizing</a>
        </div>
        <div id="copy-error" class="col-xs-6 pull-right text-right">
            <button class="btn btn-danger" id="copy-error-button" aria-label="Copy error details to clipboard">Copy error to clipboard</button>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block script %}
{{super()}}
<script src="{{ base_url }}/static/git-pull/dist/bundle.js"></script>
{% endblock %}

{% block stylesheet %}
{{super()}}

<style>
#status-details-container {
    padding: 16px;
    background-color: black;
}
#status-details {
    min-height: 360px;
}

#status-panel-toggle {
    cursor: pointer;
}

#status-panel-toggle small {
    font-size: smaller;
    color: #ccc;
    float: right;
    margin-top: -10px;
}

.progress {
    position: relative;
}

.progress span {
    position: absolute;
    display: block;
    width: 100%;
    color: black;
}

#container-error {
    margin-right: 0px;
    padding-left: 0px;
    padding-right: 30px;
}

</style>
{% endblock %}
